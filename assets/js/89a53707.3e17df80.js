"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3157],{5318:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var r=n(7378);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),s=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=s(n),m=o,f=d["".concat(l,".").concat(m)]||d[m]||u[m]||a;return n?r.createElement(f,i(i({ref:t},p),{},{components:n})):r.createElement(f,i({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:o,i[1]=c;for(var s=2;s<a;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5946:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>c,toc:()=>s});var r=n(5773),o=(n(7378),n(5318));const a={title:"Docker usage"},i=void 0,c={unversionedId:"guides/docker",id:"guides/docker",title:"Docker usage",description:"Using Docker to run your applications? Or build your artifacts? No",source:"@site/docs/guides/docker.mdx",sourceDirName:"guides",slug:"/guides/docker",permalink:"/docs/guides/docker",draft:!1,editUrl:"https://github.com/moonrepo/moon/tree/master/website/docs/guides/docker.mdx",tags:[],version:"current",frontMatter:{title:"Docker usage"},sidebar:"guides",previous:{title:"Code generation",permalink:"/docs/guides/codegen"},next:{title:"Open source usage",permalink:"/docs/guides/open-source"}},l={},s=[{value:"Dockerfile",id:"dockerfile",level:2}],p={toc:s};function u(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Using ",(0,o.kt)("a",{parentName:"p",href:"https://www.docker.com/"},"Docker")," to run your applications? Or build your artifacts? No\nworries, moon can be utilized with Docker! For the most part, everything should just work, but we\nhave disabled caching and hashing in Docker containers and images for the following reasons:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Avoids having to mount a volume for the ",(0,o.kt)("inlineCode",{parentName:"li"},".git")," directory."),(0,o.kt)("li",{parentName:"ul"},"Reduces the overall image size as we're avoiding creating tarballs."),(0,o.kt)("li",{parentName:"ul"},"Ensures that builds are fresh and up-to-date.")),(0,o.kt)("admonition",{type:"success"},(0,o.kt)("p",{parentName:"admonition"},"Looking to speed up your Docker builds? Want to build in the cloud?\n",(0,o.kt)("a",{parentName:"p",href:"https://depot.dev?ref=moonrepo"},"Give Depot a try"),"!")),(0,o.kt)("h2",{id:"dockerfile"},"Dockerfile"),(0,o.kt)("p",null,"This is merely an example of using moon within a ",(0,o.kt)("inlineCode",{parentName:"p"},"Dockerfile")," while taking advantage of its layer\ncaching. The final 2 steps should be customized to your project's needs!"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-docker"},'FROM node:latest\n\nWORKDIR /app\n\n# Install moon binary\nRUN npm install -g @moonrepo/cli\n\n# Copy moon files\nCOPY ./.moon ./.moon\n\n# Copy all package.json\'s and lockfiles\nCOPY ...\nCOPY ./package.json ./package.json\nCOPY ./yarn.lock ./yarn.lock\n\n# Install toolchain and dependencies\nRUN moon setup\n\n# Copy project and required files\nCOPY ./app/example/project ./app/example/project\nCOPY ...\n\n# Run target\nCMD ["moon", "run", "project:task"]\n')))}u.isMDXComponent=!0}}]);